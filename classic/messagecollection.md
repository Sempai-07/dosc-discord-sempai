# MessageCollection в библиотеке discord-sempai
Класс `MessageCollection` представляет коллекцию сообщений, собранных во время выполнения задачи. Класс использует `EventEmitter` из `Node.js` для передачи событий и реализует методы для управления и доступа к собранным сообщениям.

Конструктор принимает два аргумента: `channel` - объект канала `Discord` и `options` - объект настроек, в котором определяются фильтры сообщений и время ожидания сбора сообщений. Опционально можно задать максимальное количество сообщений, которые можно собрать.

Класс имеет метод `start()`, который запускает сбор сообщений в канале. Метод ожидает заданное время и затем останавливает сбор. После остановки сбора класс генерирует событие `end` и передает массив собранных сообщений в обработчик.

Класс имеет ряд методов, которые позволяют управлять собранными сообщениями:

- `stop()`: останавливает сбор сообщений;
- `setFilter(filterFunc)`: устанавливает функцию фильтрации сообщений;
- `clear()`: очищает коллекцию собранных сообщений и сбрасывает время ожидания и максимальное количество сообщений;
- `setTime(timeInMs)`: устанавливает время ожидания в миллисекундах;
- `setMax(maxCount)`: устанавливает максимальное количество сообщений, которые можно собрать;
- `getCollected()`: возвращает массив собранных сообщений;
- `getFirst()`: возвращает первое собранное сообщение или `null`, если массив пуст;
- `getLast()`: возвращает последнее собранное сообщение или `null`, если массив пуст;
- `getSize()`: возвращает количество собранных сообщений в массиве.

## Пример
```javascript
const { MessageCollection } = require('discord-sempai');

client.on('messageCreate', async (message) => {
  if (message.content === '!collect') {
    const collection = new MessageCollection(message.channel, { max: 3 });

    collection.on('collect', (msg) => {
      console.log(`Collected message: ${msg.content}`);
    });

    collection.on('end', (collected) => {
      console.log(`Collected ${collected.size} messages.`);
    });

    await collection.start();
  }
});
```